#!/bin/bash

# This script is exectued in the container environment,
# after the VS Code dev-container build.

echo "Setting EBcL container up..."

# Run user setup
if [ -d "/workspace/tools/user_config" ]; then
    echo "Running user setup..."
    if [ -f "/workspace/tools/user_config/settings.json" ]; then
        echo "Overwriting VS Code settings..."
        rm -f /workspace/.vscode/settings.json
        cp /workspace/tools/user_config/settings.json /workspace/.vscode/settings.json
    else
        echo "No settings.json provided."
    fi
else
    echo "No user config found. You can provide your own init scripts in ~/.ebcl_config"
fi

mkdir -p /workspace/tools
ln -s /build/embdgen /workspace/tools/embdgen
ln -s /build/ebcl_build_tools /workspace/tools/ebcl_build_tools
ln -s /build/ebcl_vscode_tools /workspace/tools/ebcl_vscode_tools
